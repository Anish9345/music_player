<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Player ðŸŽµ</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <!-- Currently Playing Section -->
        <div class="now-playing">
            <img id="current-thumbnail" src="{{ songs[0]['thumbnail'] if songs else '' }}" alt="Current Thumbnail">
            <p id="current-song-name">{{ songs[0]['name'] if songs else 'No Song Playing' }}</p>
            <audio id="audio-player" controls autoplay>
                {% if songs %}
                <source id="audio-source" src="{{ songs[0]['file'] }}" type="audio/mpeg">
                {% endif %}
                Your browser does not support the audio element.
            </audio>
        </div>

        <!-- Song List -->
        <div class="song-list">
            {% for song in songs %}
            <div class="song-item" data-src="{{ song['file'] }}" data-name="{{ song['name'] }}" data-thumb="{{ song['thumbnail'] }}">
                <img src="{{ song['thumbnail'] }}" alt="{{ song['name'] }}">
                <p class="song-name">{{ song['name'] }}</p>
            </div>
            {% endfor %}
        </div>
    </div>

    <script>
        // JS to handle song switching
        const audio = document.getElementById("audio-player");
        const audioSource = document.getElementById("audio-source");
        const currentName = document.getElementById("current-song-name");
        const currentThumb = document.getElementById("current-thumbnail");
        const songItems = document.querySelectorAll(".song-item");

        songItems.forEach(item => {
            item.addEventListener("click", () => {
                const src = item.getAttribute("data-src");
                const name = item.getAttribute("data-name");
                const thumb = item.getAttribute("data-thumb");

                audioSource.src = src;
                audio.load();
                audio.play();

                currentName.textContent = name;
                currentThumb.src = thumb;
            });
        });
    </script>
</body>
</html>
